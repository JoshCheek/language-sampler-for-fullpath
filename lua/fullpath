#!/usr/bin/env lua

local lfs = require("lfs")
local cwd = lfs.currentdir()
local sep = "/"

local function join(dir, entry)
  return dir .. sep .. entry
end

local function getEach(table)
  local element
  local getter, constant, state = ipairs(table)
  return function()
    state, element = getter(constant, state)
    return element
  end
end

function printEach(eachFilename)
  local i = 0
  for entry in eachFilename do
    if entry ~= "" then
      i = i + 1
      if i == 2 then io.write("\n") end
      io.write(join(cwd, entry))
      if i ~= 1 then io.write("\n") end
    end
  end
end

if #arg == 0 then
  printEach(io.lines())
else
  printEach(getEach(arg))
end
