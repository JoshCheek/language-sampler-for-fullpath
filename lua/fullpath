#!/usr/bin/env lua

local lfs = require("lfs")
local cwd = lfs.currentdir()
local sep = "/"

-- FIXME: local?
function join(dir, entry)
  return dir .. sep .. entry
end

-- FIXME: local?
function getEach(t)
  local i = 0
  return function ()
    i = i + 1
    if i <= #t then return t[i] end
  end
end

function printEach(eachFilename)
  local i = 0
  for entry in eachFilename do
    i = i + 1
    if i == 2 then io.write("\n") end
    io.write(join(cwd, entry))
    if i ~= 1 then io.write("\n") end
  end
end

if #arg == 0 then
  printEach(io.lines())
else
  printEach(getEach(arg))
end
